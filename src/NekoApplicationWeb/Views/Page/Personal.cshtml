
@using System.Threading.Tasks
@using NekoApplicationWeb.ViewModels.Page.Personal
@using Newtonsoft.Json
@model List<ApplicantViewModel>


<div class="row" ng-app="app-neko" ng-controller="personalPageController as vm" ng-init="vm.initData(@JsonConvert.SerializeObject(@Model))">
    <form name="personForm" class="form-horizontal" action="" method="post" novalidate>
        <fieldset ng-repeat="applicant in vm.applicants">
            <div class="col-xs-11">
                <legend ng-bind="applicant.Legend"></legend>
            </div>
            <span ng-show="!$first" class="col-xs-1"><a href="#" ng-click="vm.removeApplicant(applicant)"><i class="fa fa-times" style="color: red;"></i></a></span>
            <div asp-validation-summary="ValidationSummary.ModelOnly" class="text-danger"></div>

            <div>
                @*<div class="col-xs-offset-4 col-xs-8">
                    <span class="text-danger" ng-show="personForm['ssn_' + $index].$touched && personForm['ssn_' + $index].$invalid">Verður að fylla</span>
                </div>*@
                <div class="form-group" ng-if="$first">
                    <label class="col-xs-4 control-label">Kennitala</label>
                    <div class="col-xs-8">
                        <input name="ssn_{{$index}}" class="form-control ssn" ng-model="applicant.Ssn" disabled required />
                    </div>
                </div>
                <div class="form-group required" ng-if="!$first">
                    <label class="col-xs-4 control-label">Kennitala</label>
                    <div class="col-xs-8">
                        <input name="ssn_{{$index}}" class="form-control ssn" ng-model="applicant.Ssn" required mask="391299-9999"/>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-4 control-label">Netfang</label>
                <div class="col-xs-8">
                    <input class="form-control" ng-model="applicant.Name" disabled/>
                </div>
            </div>
            <div>
                <div class="form-group" ng-if="$first">
                    <label class="col-xs-4 control-label">Netfang</label>
                    <div class="col-xs-8">
                        <input type="email" class="form-control" ng-model="applicant.Email" disabled required/>
                    </div>
                </div>
                <div class="form-group required" ng-if="!$first">
                    <label class="col-xs-4 control-label">Netfang</label>
                    <div class="col-xs-8">
                        <input type="email" class="form-control" ng-model="applicant.Email" required/>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-xs-4 control-label">Facebook slóð</label>
                <div class="col-xs-8">
                    <input class="form-control" ng-model="applicant.FacebookPath"/>
                </div>
            </div>
        </fieldset>
        <div class="col-xs-offset-4 col-xs-8">
            <div class="btn btn-success" ng-click="vm.addApplicant()">
                <i class="fa fa-plus"></i> Bæta við umsækjanda
            </div>
        </div>
    </form>
    <div class="col-xs-12">
        <div class="btn btn-info pull-right" ng-click="vm.continue()" ng-disabled="personForm.$invalid">
            Vista og áfram <i class="fa fa-arrow-right" aria-hidden="true"></i>
        </div>
    </div>
</div>

